<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="wrapper">
        <div class="sidebar">
            <h2>Add Fleet</h2>
            <form id="fleetForm">
                <label >Reg No of Vehicle</label>
                <input type="text" id="regNo" placeholder="Reg no of vehicle">
                <label>Category</label>
                <select id="category">
                    <option value="">Select Category</option>
                    <option value="Auto">Auto</option>
                    <option value="Car">Car</option>
                    <option value="Truck">Truck</option>
                    <option value="Bus">Bus</option>
                </select>

                <label >Driver Name</label>
                <input type="text" id="driver" placeholder="Driver Name">

                <label>Availability</label>
                <select  id="Availability">
                    <option value="">Select</option>
                    <option value="Available">Available</option>
                    <option value="Unavailable"></option>
                </select>

                <button type="submit">Add Fleet</button>
            </form>
        </div>

        <div class="main">
            <div class="navbar">
                <select id="filterCategory">
                    <option value="All">All Category</option>
                    <option value="Auto">Auto</option>
                    <option value="Car">Car</option>
                    <option value="Truck">Truck</option>
                    <option value="Bus">Bus</option>
                </select>

                <select  id="filterAvailability">
                    <option value="All">All Availability</option>
                    <option value="Available">Available</option>
                    <option value="Unavailable"></option>
                </select>

                <button id="clearFilterBtn">Clear Filter</button>
            </div>

            <!-- Cards -->
             <div id="cardsContainer"></div>
        </div>

    </div>

    <script>
        let vehicleImgUrl="https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png"
        let vehicles=[]
        let nextId=1;

        const form =document.getElementById("fleetForm");
        const regNoInput=document.getElementById("regNo");
        const categoryInput=document.getElementById("category");
        const driverInput=document.getElementById("driver");
        const availabilityInput=document.getElementById("availability");

        form.addEventListener("submit",function(e){
            e.preventDefault();
            const regNo=regNoInput.value.trim();
            const category=categoryInput.value;
            const driver =driverInput.value.trim();

            if(regNo==="" || category==="" || driver==="" || status===""){
                alert("Please Fill all fields")
                return;
            }
            const newVehicles={
                id:nextId,
                regNo:regNo,
                category:category,
                driver:driver,
                status:status
            };
            nextId=nextId+1;
            vehicles.push(newVehicles);
            regNoInput.value="";
            categoryInput.value="";
            driverInput.value="";
            availabilityInput.value="";

            renderCards();
        });

        const filterCategory=document.getElementById("filterCategory")
        const filterAvailability=document.getElementById("filterAvailability")
        const clearFilterBtn=document.getElementById("clearFilterBtn")
        const cardsContainer=document.getElementById("cardsContainer");

        function renderCards(){
            cardsContainer.innerHtml="";
            const catFilter=filterCategory.value;
            const availFilter=filterAvailability.value;

            for(let i=0;i<vehicles.length;i++){
                const v=vehicles[i];
                if(catFilter!=="All" && v.category!== availFilter){
                    continue;
                }
                if(availFilter !=="All" && v.status 1== availFilter){
                    continue;
                }

                const card = document.createElement("div");
                card.className="card";
                const img=document.createElement("img");
                img.src=vehicleImgUrl;
                card.appendChild(img);
                const p1=document.createElement("p");
                p1.textContent="Reg No: " + v,regNo;
                card.appendChild(p1);

                const p2=document.createElement("p");
                p2.textContent="Category: " + v.category;
                card.appendChild(p2);

                const p3=document.createElement("p");
                p3.textContent="Driver: " + v.driver;
                card.appendChild(p3);

                const p4=document.createElement("p");
                p4.textContent="Status: " + v.status;
                card.appendChild(p4);

                const btnUpdate=document.createElement("button ");
                btnUpdate.textContent="Update Driver ";
                btnUpdate.addEventListener("click", function(){
                    updateDriver(v.id);
                });
                card.appendChild(btnUpdate);

                const btnChange=document.createElement("button");
                btnChange.textContent="Change Availability";
                btnChange.addEventListener("click", function(){
                    changeAvailability(v.id)
                });
                card.appendChild(btnChange);

                const btnDelete=document.createElement("button");
                btnDelete.textContent="Delete Vehicle";
                btnDelete.addEventListener("click", function(){
                    deleteVehicle(v.id)
                });
                card.appendChild(btnDelete);

                cardsContainer.appendChild(card);

            }
        }
    </script>
</body>
</html>